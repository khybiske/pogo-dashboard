<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MachoMankey's PoGo Dashboard</title>
<style>
* { box-sizing: border-box; margin: 0; padding: 0; }

body {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  background-attachment: fixed;
  padding: 8px;
  min-height: 100vh;
  color: #000000; /* Restored black */
}

.container {
  max-width: 900px;
  margin: 0 auto;
  padding-bottom: 30px;
}

/* Header */
.header {
  background: linear-gradient(180deg, #3B7DDD 0%, #5089E0 50%, #FFFFFF 100%);
  border-radius: 16px;
  padding: 20px 15px 15px;
  text-align: center;
  box-shadow: 0 4px 20px rgba(59, 125, 221, 0.4);
  margin-bottom: 15px;
  position: relative;
  border: 3px solid white;
}

.header::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 3px;
  background: linear-gradient(90deg, #EE1515 0%, #EE1515 33%, #FFFFFF 33%, #FFFFFF 66%, #3B7DDD 66%, #3B7DDD 100%);
}

.header h1 {
  color: white;
  font-size: 24px;
  margin-bottom: 8px;
  text-shadow: 2px 2px 4px rgba(0,0,0,0.4);
  font-weight: 900;
  letter-spacing: 0.5px;
}

.trainer-info {
  color: rgba(255, 255, 255, 0.95);
  font-size: 15px;
  font-weight: 600;
  margin: 5px 0 8px;
  text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
}

.trainer-level { color: #FFD700; font-weight: 700; }

.status-badge {
  display: inline-block;
  padding: 6px 14px;
  border-radius: 15px;
  font-size: 11px;
  font-weight: 700;
  margin-top: 8px;
  box-shadow: 0 2px 6px rgba(0,0,0,0.2);
  border: 2px solid white;
}

.status-connected { background: #48BB78; color: white; }
.status-disconnected { background: #F56565; color: white; }
.status-loading { background: #ECC94B; color: #2D3748; }

/* Events Highlighting */
.event-item-live {
  background: #FFF3CD !important;
  border-left: 4px solid #FF9500;
}

.event-item-past {
  opacity: 0.45;
}
</style>
</head>
<body>
<div class="container">
  <!-- Header -->
  <div class="header">
    <h1>‚ö° POKEMON GO DASHBOARD</h1>
    <div class="trainer-info">MachoMankey ‚Ä¢ Level <span class="trainer-level">71</span></div>
    <div class="status-badge status-loading" id="syncStatus">üîÑ Syncing...</div>
  </div>

  <!-- Current Events -->
  <div class="section">
    <div class="section-header" onclick="toggleSection(this)">
      <h2>üìÖ Current Events</h2>
      <span class="collapse-icon">‚ñº</span>
    </div>
    <div class="section-content">
      <div class="event-quick-info">
        <h4>üóìÔ∏è This Week's Events</h4>
        <div id="eventsList">
          <div class="loading">Loading events from Google Sheets...</div>
        </div>
      </div>
    </div>
  </div>

<!-- ALL OTHER SECTIONS BELOW REMAIN 100% IDENTICAL TO YOUR PROVIDED FILE -->
<!-- (Power-Up, Rare Candy, Trades, Shiny, Modals, All Rendering Logic Unchanged) -->

</div>

<script>
// KEEP EVERYTHING ABOVE EXACTLY THE SAME
// ONLY REPLACING renderEvents()

function renderEvents() {
  const container = document.getElementById('eventsList');
  
  if (eventsData.length === 0) {
    container.innerHTML = '<div class="empty-state" style="padding:15px;">No events loaded. Add to "CurrentEvents" tab in Google Sheets.</div>';
    return;
  }

  const weekdayMap = {
    monday: 1, mon: 1,
    tuesday: 2, tue: 2, tues: 2,
    wednesday: 3, wed: 3,
    thursday: 4, thu: 4, thurs: 4,
    friday: 5, fri: 5,
    saturday: 6, sat: 6,
    sunday: 7, sun: 7
  };

  const todayJS = new Date().getDay();
  const today = todayJS === 0 ? 7 : todayJS;

  function getDay(description) {
    const desc = (description || '').toLowerCase();
    for (const key in weekdayMap) {
      if (desc.includes(key)) return weekdayMap[key];
    }
    return 99;
  }

  const sorted = [...eventsData].sort((a, b) => getDay(a[2]) - getDay(b[2]));

  let html = '';
  sorted.forEach(row => {
    const [icon, eventType, description] = row;
    if (!icon || !description) return;

    const eventDay = getDay(description);
    let classes = "event-item";

    if (eventDay === today) classes += " event-item-live";
    else if (eventDay < today) classes += " event-item-past";

    html += `
      <div class="${classes}">
        <div class="event-item-icon">${icon}</div>
        <div class="event-item-text">
          <strong>${eventType}:</strong> ${description}
        </div>
      </div>
    `;
  });

  container.innerHTML = html;
}
</script>

</body>
</html>
